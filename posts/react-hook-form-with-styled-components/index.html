<!doctype html><html lang=ja><head><meta charset=utf-8><title>React Hook Form と Styled Components を一緒に使いたい</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-151064248-1"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-151064248-1')</script><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=alternate type=application/rss+xml href=https://shota.coffee/index.xml title=shotaCoffee><meta name=twitter:card content="summary"><meta name=twitter:title content="React Hook Form と Styled Components を一緒に使いたい"><meta name=twitter:description content="解決したいこと React Hook Form の register をいい感じに Styled-Components に渡したい。 Styled-Components の ref の型といい感じに合わせたい。 環境 &#34;react&#34;: &#34;^16.13.1&#34;, &#34;react-hook-form&#34;: &#34;^6.9.6&#34;, &#34;styled-components&#34;: &#34;^5.1.1&#34;, &#34;typescript&#34;: &#34;~3.7.2&#34; 解決方法 Styled Components が認識できるように型を書"><link rel=stylesheet href=https://shota.coffee/fontawesome/css/all.min.css><link id=dark-mode-theme rel=stylesheet href=https://shota.coffee/css/dark.css><script>var darkTheme=document.getElementById('dark-mode-theme'),storedTheme=localStorage.getItem('dark-mode-storage');storedTheme==='dark'?darkTheme.disabled=!1:storedTheme==='light'&&(darkTheme.disabled=!0)</script><script src=https://shota.coffee/js/main.bundle.js></script><script src=https://shota.coffee/js/instantpage.min.js type=module defer></script><meta name=generator content="Hugo 0.82.0"></head><body><header><nav class=navbar><div class=nav><a href=https://shota.coffee/ class=nav-logo><img src=https://shota.coffee/images/logo.svg width=50 height=50 alt=Logo></a><ul class=nav-links></ul></div></nav><div class=intro-header><div class=container><div class=posts-heading><h1>React Hook Form と Styled Components を一緒に使いたい</h1></div></div></div></header><div class=container role=main><article class=article class=blog-post><h2 id=解決したいこと>解決したいこと</h2><ul><li>React Hook Form の register をいい感じに Styled-Components に渡したい。</li><li>Styled-Components の ref の型といい感じに合わせたい。</li></ul><h2 id=環境>環境</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#e6db74>&#34;react&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;^16.13.1&#34;</span>,
<span style=color:#e6db74>&#34;react-hook-form&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;^6.9.6&#34;</span>,
<span style=color:#e6db74>&#34;styled-components&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;^5.1.1&#34;</span>,
<span style=color:#e6db74>&#34;typescript&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;~3.7.2&#34;</span>
</code></pre></div><h2 id=解決方法>解決方法</h2><ul><li>Styled Components が認識できるように型を書いてあげる。</li></ul><h3 id=コンポーネント側>コンポーネント側</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>RefReturn</span> <span style=color:#f92672>=</span>
  <span style=color:#f92672>|</span> <span style=color:#66d9ef>string</span>
  <span style=color:#f92672>|</span> ((<span style=color:#a6e22e>instance</span>: <span style=color:#66d9ef>HTMLInputElement</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>void</span>)
  <span style=color:#f92672>|</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>RefObject</span>&lt;<span style=color:#f92672>HTMLInputElement</span>&gt;
  <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>
  <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>;

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>DetailedHTMLProps</span>&lt;<span style=color:#f92672>React.InputHTMLAttributes</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>HTMLInputElement</span>&gt;,
  <span style=color:#a6e22e>HTMLInputElement</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&amp;</span> {
  <span style=color:#a6e22e>placeholder?</span>: <span style=color:#66d9ef>string</span>
  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>string</span>
  <span style=color:#a6e22e>register</span><span style=color:#f92672>:</span> ({<span style=color:#a6e22e>required</span>}<span style=color:#f92672>:</span> { <span style=color:#a6e22e>required?</span>: <span style=color:#66d9ef>boolean</span> }) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>RefReturn</span>;
};

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Ref</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>instance</span>: <span style=color:#66d9ef>HTMLInputElement</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>void</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>RefObject</span>&lt;<span style=color:#f92672>HTMLInputElement</span>&gt; <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>FormInput</span> <span style=color:#f92672>=</span> ({<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>register</span>, <span style=color:#a6e22e>required</span>, <span style=color:#a6e22e>placeholder</span>}<span style=color:#f92672>:</span> <span style=color:#a6e22e>Props</span>) <span style=color:#f92672>=&gt;</span> {
  <span style=color:#66d9ef>return</span> (
    &lt;<span style=color:#f92672>Input</span>
      <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>
      <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>placeholder</span>}
      <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>name</span>}
      <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>register</span>({<span style=color:#a6e22e>required</span>}) <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Ref</span>}
    /&gt;
  )
};
</code></pre></div><h3 id=親コンポーネント>親コンポーネント</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx>&lt;<span style=color:#f92672>FormInput</span>
  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span>
  <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;パスワード&#34;</span>
  <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span>
  <span style=color:#a6e22e>register</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>register</span>}
	<span style=color:#a6e22e>required</span>
/&gt;
</code></pre></div><h3 id=参考>参考</h3><ul><li><a href=https://github.com/react-hook-form/react-hook-form/discussions/1681>https://github.com/react-hook-form/react-hook-form/discussions/1681</a></li><li><a href=https://codesandbox.io/s/react-hook-formstyled-components-cboo1?from-embed>https://codesandbox.io/s/react-hook-formstyled-components-cboo1?from-embed</a></li><li><a href=https://styled-components.com/docs/advanced#refs>https://styled-components.com/docs/advanced#refs</a></li><li><a href=https://react-hook-form.com/get-started/#Integratinganexistingform>https://react-hook-form.com/get-started/#Integratinganexistingform</a></li></ul><div class=blog-tags><a href=https://shota.coffee/tags/react/>React</a>&nbsp;</div></article></div><footer><div class=social-icons><a href=https://twitter.com/shota_coffee name=Twitter><em class="fab fa-twitter"></em></a>&nbsp;&ndash;&nbsp;
<a href=https://github.com/shotaCoffee name=GitHub><em class="fab fa-github"></em></a>&nbsp;&ndash;&nbsp;
<a href=https://www.facebook.com/shotaCoffee name=facebook><em class="fab fa-facebook"></em></a>&nbsp;&ndash;&nbsp;
<a href=https://www.linkedin.com/in/shota-murakami-40362011b/ name=linkedin><em class="fab fa-linkedin"></em></a></div><div class=container><p class="credits copyright"><a href=https://shota.coffee/about></a>&nbsp;&copy;
2021
&nbsp;/&nbsp;
<a href=https://shota.coffee/>shotaCoffee</a>
&nbsp;&ndash;&nbsp;
<em class="fas fa-moon" id=dark-mode-toggle></em></p></div></footer></body></html>