<!doctype html><html><head><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1"><meta name=twitter:image:src content="https://shota.coffee/images/og/default-og-img.png"><meta property="og:image" content="https://shota.coffee/images/og/default-og-img.png"><meta property="og:title" content="codesign"><meta property="og:site_name" content="codesign"><meta name=description content="shotaCoffeeのブログです"><meta property="og:description" content="shotaCoffeeのブログです"><meta property="og:image" content="https://shota.coffee//images/og/react-hook-form-with-styled-components.png"><meta name=twitter:image:src content="https://shota.coffee//images/og/react-hook-form-with-styled-components.png"><meta property="og:title" content="React Hook Form と Styled Components を一緒に使いたい | codesign"><meta property="og:site_name" content="React Hook Form と Styled Components を一緒に使いたい | codesign"><meta name=description content><meta property="og:description" content><meta property="og:locale" content="ja"><meta property="og:image:width" content="600"><meta property="og:image:height" content="315"><meta property="og:type" content="website"><meta name=twitter:site content="@shota_coffee"><meta name=twitter:card content="summary_large_image"><meta property="fb:app_id" content="2709602549147832"><link rel=icon type=image/x-icon href=/favicon.ico><link rel=stylesheet href=https://shota.coffee/styles/main.css><meta charset=utf-8><title>React Hook Form と Styled Components を一緒に使いたい</title><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-151064248-1','auto'),ga('send','pageview'))</script></head><body><header class=header><nav class=navigation><ul><li><a href=/><img src=/images/logo.svg alt=codesign></a></li><li><a href=/article/>Article</a></li><li><a href=/tags/>Tags</a></li></ul></nav></header><div class=post><h2>React Hook Form と Styled Components を一緒に使いたい</h2><div class=post-meta><div class=posted>2020.12.27</div><div class=categories><ul><li class=text-small><a href=/tags/React/>React</a></li></ul></div></div><h2 id=解決したいこと>解決したいこと</h2><ul><li>React Hook Form の register をいい感じに Styled-Components に渡したい。</li><li>Styled-Components の ref の型といい感じに合わせたい。</li></ul><h2 id=環境>環境</h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#e6db74>&#34;react&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;^16.13.1&#34;</span>,
<span style=color:#e6db74>&#34;react-hook-form&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;^6.9.6&#34;</span>,
<span style=color:#e6db74>&#34;styled-components&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;^5.1.1&#34;</span>,
<span style=color:#e6db74>&#34;typescript&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;~3.7.2&#34;</span>
</code></pre></div><h2 id=解決方法>解決方法</h2><ul><li>Styled Components が認識できるように型を書いてあげる。</li></ul><h3 id=コンポーネント側>コンポーネント側</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style=color:#66d9ef>type</span> <span style=color:#a6e22e>RefReturn</span> <span style=color:#f92672>=</span>
  <span style=color:#f92672>|</span> <span style=color:#66d9ef>string</span>
  <span style=color:#f92672>|</span> ((<span style=color:#a6e22e>instance</span>: <span style=color:#66d9ef>HTMLInputElement</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>void</span>)
  <span style=color:#f92672>|</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>RefObject</span>&lt;<span style=color:#f92672>HTMLInputElement</span>&gt;
  <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>
  <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>;

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Props</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>DetailedHTMLProps</span>&lt;<span style=color:#f92672>React.InputHTMLAttributes</span><span style=color:#960050;background-color:#1e0010>&lt;</span><span style=color:#a6e22e>HTMLInputElement</span>&gt;,
  <span style=color:#a6e22e>HTMLInputElement</span><span style=color:#f92672>&gt;</span> <span style=color:#f92672>&amp;</span> {
  <span style=color:#a6e22e>placeholder?</span>: <span style=color:#66d9ef>string</span>
  <span style=color:#a6e22e>name</span>: <span style=color:#66d9ef>string</span>
  <span style=color:#a6e22e>register</span><span style=color:#f92672>:</span> ({<span style=color:#a6e22e>required</span>}<span style=color:#f92672>:</span> { <span style=color:#a6e22e>required?</span>: <span style=color:#66d9ef>boolean</span> }) <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>RefReturn</span>;
};

<span style=color:#66d9ef>type</span> <span style=color:#a6e22e>Ref</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>instance</span>: <span style=color:#66d9ef>HTMLInputElement</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span>) <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>void</span> <span style=color:#f92672>|</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>RefObject</span>&lt;<span style=color:#f92672>HTMLInputElement</span>&gt; <span style=color:#f92672>|</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>|</span> <span style=color:#66d9ef>undefined</span>

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>FormInput</span> <span style=color:#f92672>=</span> ({<span style=color:#a6e22e>name</span>, <span style=color:#a6e22e>register</span>, <span style=color:#a6e22e>required</span>, <span style=color:#a6e22e>placeholder</span>}<span style=color:#f92672>:</span> <span style=color:#a6e22e>Props</span>) <span style=color:#f92672>=&gt;</span> {
  <span style=color:#66d9ef>return</span> (
    &lt;<span style=color:#f92672>Input</span>
      <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;text&#34;</span>
      <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>placeholder</span>}
      <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>name</span>}
      <span style=color:#a6e22e>ref</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>register</span>({<span style=color:#a6e22e>required</span>}) <span style=color:#66d9ef>as</span> <span style=color:#a6e22e>Ref</span>}
    /&gt;
  )
};
</code></pre></div><h3 id=親コンポーネント>親コンポーネント</h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx>&lt;<span style=color:#f92672>FormInput</span>
  <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span>
  <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;パスワード&#34;</span>
  <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;password&#34;</span>
  <span style=color:#a6e22e>register</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>register</span>}
	<span style=color:#a6e22e>required</span>
/&gt;
</code></pre></div><h3 id=参考>参考</h3><ul><li><a href=https://github.com/react-hook-form/react-hook-form/discussions/1681>https://github.com/react-hook-form/react-hook-form/discussions/1681</a></li><li><a href=https://codesandbox.io/s/react-hook-formstyled-components-cboo1?from-embed>https://codesandbox.io/s/react-hook-formstyled-components-cboo1?from-embed</a></li><li><a href=https://styled-components.com/docs/advanced#refs>https://styled-components.com/docs/advanced#refs</a></li><li><a href=https://react-hook-form.com/get-started/#Integratinganexistingform>https://react-hook-form.com/get-started/#Integratinganexistingform</a></li></ul></div></body></html>